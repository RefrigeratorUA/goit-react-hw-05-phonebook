(this["webpackJsonpgoit-react-hw-05-phonebook"]=this["webpackJsonpgoit-react-hw-05-phonebook"]||[]).push([[5],{113:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n(58),c=n.n(a),o=n(59),i=n(94),u=n(54),s=n(55),h=n(57),l=n(56),p=n(0),f=n(95),d=n.n(f);function b(t){return d.a.parse(t)}var m=n(73),v=n(110),j=(n(109),function(t){var e=t.position,n=void 0===e?"top-right":e,a=t.autoClose,c=void 0===a?3e3:a;return Object(r.jsx)(v.a,{position:n,autoClose:c,hideProgressBar:!1,newestOnTop:!1,pauseOnHover:!0,closeOnClick:!0,draggable:!0,progress:void 0,transition:v.b,pauseOnFocusLoss:!0,rtl:!1,limit:1})}),g=function(t,e){v.c.error(t,e)},y=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={query:""},t.handleChange=function(e){var n=e.target,r=n.name,a=n.value;t.setState(Object(m.a)({},r,a))},t.handleSubmit=function(e){e.preventDefault();var n=t.state.query,r=t.props.onSubmit;if(!n.trim())return g("Input search query.",{position:"top-center"}),t.setState({query:""});r(n.trim().toLowerCase()),t.setState({query:""})},t}return Object(s.a)(n,[{key:"render",value:function(){var t=this.state.query;return Object(r.jsx)("div",{className:"Searchbar",children:Object(r.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(r.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(r.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(r.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",name:"query",value:t,onChange:this.handleChange})]})})}}]),n}(p.Component),O=n(53),S=n(63),x=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={movies:[],error:null},t.handleFetchhMovies=function(e){Object(O.d)(e).then((function(e){if(0===e.length)return t.setState({movies:[],error:"\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"});t.setState({movies:e,error:null})}))},t.handleQueryFromSearchbar=function(e){t.props.history.push(Object(i.a)(Object(i.a)({},t.props.location),{},{search:"query=".concat(e)}))},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=Object(o.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=b(this.props.location.search),!(n=e.query)){t.next=4;break}return t.next=4,this.handleFetchhMovies(n);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(o.a)(c.a.mark((function t(e,n){var r,a,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=b(e.location.search),a=r.query,o=b(this.props.location.search),i=o.query,a===i){t.next=5;break}return t.next=5,this.handleFetchhMovies(i);case 5:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.movies,n=t.error,a=b(this.props.location.search).query;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y,{onSubmit:this.handleQueryFromSearchbar}),n?Object(r.jsxs)("h1",{children:["\u041d\u0435\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ",Object(r.jsxs)("i",{children:['"',a,'"']})]}):Object(r.jsx)(S.a,{movies:e}),Object(r.jsx)(j,{})]})}}]),n}(p.Component);e.default=x},53:function(t,e,n){"use strict";n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"f",(function(){return d})),n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return h}));var r=n(60),a=n.n(r),c="8add86c956039dd3121ecd9270a2bde1",o="https://api.themoviedb.org/3/",i="".concat(o,"trending/movie/day"),u="".concat(o,"movie/"),s="".concat(o,"search/movie"),h="https://image.tmdb.org/t/p/original/";function l(){return a.a.get("".concat(i),{params:{page:1,api_key:c}}).then((function(t){return t.data.results})).catch((function(t){return t}))}function p(t){return a.a.get("".concat(u).concat(t),{params:{api_key:c,language:"en-US"}}).then((function(t){return t.data})).catch((function(t){return t}))}function f(t){return a.a.get("".concat(u).concat(t,"/credits"),{params:{api_key:c,language:"en-US"}}).then((function(t){return t.data.cast})).catch((function(t){return t}))}function d(t){return a.a.get("".concat(u).concat(t,"/reviews"),{params:{page:1,api_key:c,language:"en-US"}}).then((function(t){return t.data.results})).catch((function(t){return t}))}function b(t){return a.a.get("".concat(s),{params:{page:1,api_key:c,language:"en-US",include_adult:!0,query:t}}).then((function(t){return t.data.results})).catch((function(t){return t}))}},63:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1),a=n(10),c=n(3),o=n(8),i=Object(c.f)((function(t){var e=t.movies,n=t.location;return Object(r.jsx)("ul",{className:"MoviesList",children:e.map((function(t){var e=t.id,c=t.title;return Object(r.jsx)("li",{children:Object(r.jsx)(a.b,{to:{pathname:"".concat(o.a.movies,"/").concat(e),state:{from:n}},children:c})},e)}))})}))}}]);
//# sourceMappingURL=movies-page.bc97729f.chunk.js.map